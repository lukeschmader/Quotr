<!DOCTYPE html>
<html ng-app="stockApp">
  <head>
    <meta charset="utf-8">
    <title>Angular.js Example</title>
    <script src="//cdnjs.cloudflare.com/ajax/libs/angular.js/1.2.1/angular.min.js"></script>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/css/bootstrap.min.css">
	<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/css/bootstrap-theme.min.css">
	<link href="css/myCss.css" rel="stylesheet">
    <script>    
    
      var nameApp = angular.module('stockApp', []);
      nameApp.controller('StockCtrl', function ($scope, $http){	
    	  $scope.search="GPRO";
        $scope.$watch('search', function(newValue, oldValue){
        	if(newValue != "")
        	{   			  
	            var urls = '/StockWebApp/StockServlet?symbol=' + angular.uppercase(newValue);
	            $scope.search=angular.uppercase($scope.search);
	            $http.get(urls).success(function(data){
	            	if(data != "")
            		{
		            	var J =  data;
		            	
			            document.getElementById("price").innerHTML =JSON.stringify(J);
			            document.getElementById("companyName").innerHTML = J.data.company.name;
			            document.getElementById("symbol").innerHTML = " (" + J.data.company.symbol + ") ";
			            document.getElementById("pctChg").innerHTML = J.data.stock.pctChg < 0.00 ? "<font color=red>" + "(" +J.data.stock.pctChg + "%)" + "</font>" 
			            		: "<font color=green>" + "(" + J.data.stock.pctChg + "%)" + "</font>";
			            
			            
			            
            		}
	            	$scope.$apply();
	            });	           
        	}
          });   
      });     
      
      
    </script>
  </head>
 <div class="container">
  <body ng-controller="StockCtrl">
 	 <div class="row">
		<div class="h3 darkBG col-md-12">Stock App</div>
	</div>
	<div class="row">
		<div class="col-md-9">			
		</div>
		<div class="col-md-3">
		Search:<input ng-model="search" placeholder="Search symbol..." ng-model-options="{debounce: 1000}" type="text"/><br><br><br>
		</div>
	</div> 
	<div class="row">
	<div class="col-xl-12">
	    <h2 id="companyName"></h2>
	    <h2 id="symbol"></h2>
	    <h2 id="pctChg"></h2>
    </div>
    <div class="row">
    <div class="col-sm-8"></div>
	    <div class="col-sm-2">    
		    <table class=" table">
		    <thead>
		    <tr>
		        <th></th>
		        <th></th>
		      </tr>		      
		    </thead>
		    <tbody>
		      <tr>
		        <td><font color=grey>John</td>
		        <td>Doe</td>
		      </tr>
		      <tr>
		        <td><font color=grey>John</td>
		        <td>Doe</td>
		      </tr>
		      <tr>
		        <td><font color=grey>Mary</td>
		        <td>Moe</td>
		      </tr>
		      <tr>
		        <td><font color=grey>July</td>
		        <td>Dooley</td>
		      </tr>
		    </tbody>
		  </table>
	  	</div>
	  	 <div class="col-sm-2">    
		    <table class=" table">
		    <thead>
		    <tr>
		        <th></th>
		        <th></th>
		      </tr>		      
		    </thead>
		    <tbody>
		      <tr>
		        <td><font color=grey>John</td>
		        <td>Doe</td>
		      </tr>
		      <tr>
		        <td><font color=grey>John</td>
		        <td>Doe</td>
		      </tr>
		      <tr>
		        <td><font color=grey>Mary</td>
		        <td>Moe</td>
		      </tr>
		      <tr>
		        <td><font color=grey>July</td>
		        <td>Dooley</td>
		      </tr>
		    </tbody>
		  </table>
	  	</div>
    </div>
    <br>
    <br>
    <p id="price"></p>
    
</div>
  </body>
</html>